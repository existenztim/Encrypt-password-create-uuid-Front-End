(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();let p=document.getElementById("loginForm");const r=document.getElementById("userGreeting");let v="https://crypto-js-login-qq2wj.ondigitalocean.app/";const d=()=>{const e=new Date().getHours();e<11?r.innerText="Good morning ":e<14?r.innerText="Good day ":e<18?r.innerText="Good afternoon ":r.innerText="Good evening "};d();const m=()=>{localStorage.removeItem("username"),p.innerHTML=`
        <h2>You are now logged in</h2>
        <button id="logoutUserBtn">Logout</button>
    `,logoutUserBtn.addEventListener("click",()=>{localStorage.removeItem("username"),r.innerText="You have been logged out.",h()})},h=()=>{p.innerHTML=`
        <h2>Login here:</h2>
        <input type="text" id="loginUsername" placeholder="Användarnamn" />
        <input type="password" id="loginPassword" placeholder="Lösenord" />
        <button id="loginUserBtn">Login</button>
        `,loginUserBtn.addEventListener("click",()=>{let t={userName:loginUsername.value,userPassword:loginPassword.value};console.log(t),fetch(`${v}users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{console.log(e),e.userName?(r.innerText="",d(),r.innerHTML+=` 
                        <p>Here you can see the registered user and their info; obviously, displaying passwords is an extremely bad practice, and this is only for demonstration.</p>
                        <p>You are logged in as ${e.userName}<p>
                        <p>Your unique id given to you is : ${e.id}</p>
                        <p>Your password is : ${e.decryptedUserPassword}</p>
                        <p>Your encrypted password (that is stored on the server) : ${e.encryptedUserPassword}</p>
                    `,localStorage.setItem("username",e.userName),m()):r.innerText="failed to login, please check your username or password and try again"}),loginUsername.value="",loginPassword.value=""})},a=document.getElementById("userList"),w=document.getElementById("saveUserBtn"),u=document.getElementById("newUser"),c=document.getElementById("newUserPassword");let g=localStorage.getItem("username"),y="https://crypto-js-login-qq2wj.ondigitalocean.app/";d();const U=()=>{g?(userGreeting.innerText+=` ${g}`,m()):h()};U();fetch(`${y}users`).then(t=>t.json()).then(t=>{f(t)});function f(t){console.log(t),a.innerHTML="",t.map(e=>{let s=document.createElement("li");s.innerText=`User name : ${e.userName}`;let i=document.createElement("br");a.appendChild(i),a.appendChild(s)})}w.addEventListener("click",()=>{let t={userName:u.value,userPassword:c.value};console.log(t),fetch(`${y}users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{f(e)}),u.value="",c.value=""});
